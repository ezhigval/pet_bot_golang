# Архитектура SaaS проекта ЗЕЛЕНИАЛ

Цель: дать полное представление о технологическом стеке, микросервисной архитектуре и принципах работы платформы.

---

## 1. Общая концепция
ЗЕЛЕНИАЛ — это интеллектуальный персональный ассистент, объединяющий управление здоровьем, финансами, проектами, обучением и социальными связями.  
Приложение работает по принципу SaaS (Software as a Service) и разделено на микросервисы с центральной системой аутентификации.

---

## 2. Микросервисы
Все микросервисы запускаются независимо и взаимодействуют через брокер сообщений Kafka.

### 2.1 User Service
- Регистрация, авторизация и управление профилем.
- 2FA и привязка устройств.
- Контроль уникальности пользователей и ограничение бесплатного периода.
- Работа с PostgreSQL.
- Логирование через Zerolog.

### 2.2 Finance Service
- Управление финансами, платежами, подписками.
- Связь с календарем и транспортными расходами.
- Поддержка прогноза бюджета и отчетов.

### 2.3 Planning Service
- Календарь, напоминания, трекеры задач.
- Интеграция с Health и Learning.
- Распределение событий и уведомлений.

### 2.4 Learning Service
- Персонализированные рекомендации по развитию навыков.
- Встроенные советы, подбор курсов и событий.
- Интеграция с AI для анализа поведения пользователя.

### 2.5 Health Service
- Отслеживание здоровья, привычек и стресса.
- Подключение медитаций, эмоционального интеллекта.
- Взаимодействие с календарем и привычками.

### 2.6 Reflection Service
- Журнал рефлексий, заметки, анализ продуктивности.
- Встроенный AI-ассистент по саморазвитию.

---

## 3. Технологический стек

| Слой                  | Технологии и инструменты                       |
|-----------------------|-----------------------------------------------|
| Backend               | Go (Gin), PostgreSQL, SQLx, Zerolog, JWT     |
| Frontend веб          | React + Vite, TypeScript, TailwindCSS         |
| Mobile                | Android: Kotlin, iOS: Swift                   |
| Месседжинг            | Kafka                                         |
| Инфраструктура        | Docker, Docker Compose, Kubernetes (будущее) |
| CI/CD                 | GitHub Actions, автоматические пайплайны     |
| Безопасность          | HTTPS/TLS, шифрование БД, 2FA, контроль устройств |
| Логи и мониторинг     | Zerolog, Prometheus, Grafana                  |
| AI и ML               | Отдельные модели на бэкенде, анонимизация данных |

---

## 4. Архитектура
- Монорепозиторий с отдельными папками для каждого микросервиса.
- В дальнейшем можно разделить на несколько репозиториев.
- Все микросервисы имеют собственную базу данных.
- Взаимодействие между микросервисами через Kafka.
- Веб и мобильные клиенты обращаются к API Gateway, который направляет запросы к нужному сервису.
- Аутентификация через JWT, 2FA для критичных операций.
- Персональные данные хранятся в отдельной базе и шифруются.

---

## 5. Безопасность
- TLS/HTTPS для всех соединений.
- Шифрование БД и чувствительных полей.
- 2FA для пользователей.
- Привязка устройств к аккаунтам.
- Ограничение бесплатных периодов и контроль дублирующих регистраций.
- Алерты о подозрительных регистрациях для администраторов.
- Защита от DDoS и нагрузок через балансировку и rate limiting.

---

## 6. Масштабирование
- Микросервисы могут разворачиваться на разных серверах или контейнерах.
- Kafka позволяет добавлять новые сервисы без изменения старых.
- PostgreSQL можно масштабировать через репликацию и шардинг.
- CI/CD пайплайны позволяют быстрые обновления без простоя.

---

## 7. Будущее развитие
- Подключение продвинутых моделей AI для анализа поведения.
- Автоматическая персонализация и рекомендации.
- Возможность интеграции с внешними сервисами (платежи, календари, IoT).
- Улучшение UI/UX на основе аналитики поведения пользователей.
